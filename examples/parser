
parser org.bovinegenius.wombat/WombatParser

use org.bovinegenius.wombat/WombatLang as WL

str(string) = r'"(\\.|[^"\\])*"' -> WL.clean-str
num(number) =
   r'(?:0[xX][a-fA-F0-9]+)|(?:0[bB][01]+)|(?:0[oO][0-7]+)|(?:[0-9]+)'
  -> WL.parse-int

expr = {
  str,
  num,
  'if' expr:test 'then' expr:then = WL.expr.if(test, then),
  'if' expr:test 'then' expr:then 'else' expr:else = WL.expr.if(test, then, else),
  expr:first '|' expr:second = 
}
